[metadata]
id = "flask-upload-sshfs"
version = "1.0"
title = "Flask test upload on sshfs volume"
author = "Nua testers"
tagline = "Nua test with Flask and mount - sshfs"
website = "https://nua.rocks/"
tags = ["test", "html", "web", "static", "mount", "plugin", "sshfs"]
licence = "MIT"
profile = ["test"]
release = 1

[build]
# optional manifest.
# if no manifest, use files in the repository (except dot files)
# - if manifest is not empty, *only* files from manifest are copied
# - "nua-config.toml" is always copied, wether local or not
# manifest = [
# # if no Dockerfile provided => use Nua default Dockerfile:
# "Dockerfile",
# "www",
# "build.py"
# ]

# src_url = "https://github.com/moinwiki/moin/archive/refs/heads/master.tar.gz"
# src_git = "https://github.com/moinwiki/moin.git"

# optional build script, default is "build.py" if found
# build_script = ""
# optional start script, default is "start.py" if found
# start_script = ""
document_root = "/nua/app/html"
[instance]
# instance contains values suited to be chaned at deploy time for
# multi-instance deploument. Values here are used by default, i.e. for a single
# deployment of the app
[run]
# parameters passed as a dict to docker run
auto_remove = true
# detach = true mandatory
[run_env]
# parameters passed as a dict to docker run: environment dict

[[ports]]
container = 80

[[volume]]
name = "flask_uploads"
driver = "sshfs"
type = "volume"
dst = "/var/tmp/uploads"
[[volume.options]]
sshcmd = "user@remote.com:/var/test"
# password = "testpassword"  # if passaword auth
IdentityFile= "/nua/some_private_key"
