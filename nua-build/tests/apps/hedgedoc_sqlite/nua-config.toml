[metadata]
id = "hedgedoc-sqlite"
version = "1.9.6"
title = "Nua test with Hedgedoc/sqlite"
author = "Nua testers"
tagline = "Nua test with Hedgedoc/sqlite"
website = "https://nua.rocks/"
tags = ["test", "html", "web", "Hedgedoc", "sqlite" ]
licence = "MIT"
profile = ["test"]
release = 1

[build]
# use a base docker image containing nodejs:
nua_base = "nua-builder-nodejs16"
# document_root = "/nua/app/html"

[instance]

[run]
# parameters passed as a dict to docker run
auto_remove = false
# detach = true mandatory

[run.env]
NODE_ENV = "production"
UPLOADS_MODE = "0700"

# DB_HOST=<hostname or ip>
# DB_PORT= 5432
# DB_USER=hedgedoc
# DB_PASS=<secret password>
# DB_NAME=hedgedoc
TZ = "Europe/Paris"

CMD_DOMAIN = "localhost"
# CMD_DB_URL = "postgres://hedgedoc:password@database:5432/hedgedoc"
CMD_DB_URL = "sqlite:///nua/data/sqlite.db"
# **HSTS_ENABLE** defines if HSTS headers should be sent. Set this to true if you use HTTPS.
CMD_HSTS_ENABLE = false
# **URL_ADDPORT** defines if generated links should contain the port.
CMD_URL_ADDPORT = false
CMD_PROTOCOL_USESSL=false
# CMD_ALLOW_ORIGIN=['localhost'] #optional

# for debug:
# export NODE_ENV="production" UPLOADS_MODE="0700" TZ="Europe/Paris" CMD_DOMAIN="localhost" CMD_DB_URL="sqlite:///nua/data/sqlite.db" CMD_HSTS_ENABLE=false CMD_URL_ADDPORT=false CMD_PROTOCOL_USESSL=false

# Error: Cannot find module 'babel-runtime/core-js/json/stringify'

[port.web]
container = 3000


# start:
# chmod $UPLOADS_MODE ./public/uploads


[[volume]]
# uploads:/hedgedoc/public/uploads

# The mount type (bind / volume / tmpfs / npipe). Default: volume :
type = "bind"
# Name of the driver used to create the volume: (for type == "volume")
# driver = "local"
# Mount source (e.g. a volume name or a host path):
source = "/var/tmp"
# Container path:
target = "/nua/data"
#
mode = "rw"
# dst = "/var/tmp/uploads"
